(function(b,d,a){var c=a(b,d);b.util=b.util||{};b.util.toucher=b.util.toucher||c;b.define&&define(function(f,g,e){return c})})(this,document,function(b,f){function e(k,j){return k.className.match(new RegExp("(\\s|^)"+j+"(\\s|$)"))}function i(m,n){this._events=this._events||{};if(!this._events[m]){return}var p=this._events[m];var j=n.target;while(1){if(p.length==0){return}if(j==this.dom||!j){for(var l=0,q=p.length;l<q;l++){var k=p[l]["className"];var r=p[l]["fn"];if(k==null){d(m,r,j,n)}}return}var o=p;p=[];for(var l=0,q=o.length;l<q;l++){var k=o[l]["className"];var r=o[l]["fn"];if(e(j,k)){if(d(m,r,j,n)==false){return}}else{p.push(o[l])}}j=j.parentNode}}function d(j,k,o,n){var q=n.plugTouches||n.touches,p=q.length?q[0]:{},m={type:j,target:n.target,pageX:p.pageX,pageY:p.pageY,clientX:p.clientX||0,clientY:p.clientY||0};if(j.match(/^swipe/)&&n.plugStartPosition){m.startX=n.plugStartPosition.pageX;m.startY=n.plugStartPosition.pageY;m.moveX=m.pageX-m.startX;m.moveY=m.pageY-m.startY}var l=k.call(o,m);if(l==false){n.preventDefault();n.stopPropagation()}return l}function g(k,j,m,l){return Math.abs(k-j)>=Math.abs(m-l)?(k-j>0?"Left":"Right"):(m-l>0?"Up":"Down")}function h(z){var k=this;var q=0;var r=0;var l,u,j,s;var n;var y;var w=false;var t=null;function m(A){w=false;clearTimeout(y);clearTimeout(n)}function v(){m();i.call(k,"singleTap",t)}function p(A){t=A;l=A.touches[0].pageX;u=A.touches[0].pageY;j=0;s=0;w=true;q=new Date();i.call(k,"swipeStart",A);clearTimeout(y);y=setTimeout(function(){m(A);i.call(k,"longTap",A)},500)}function x(B){B.plugStartPosition=t.plugStartPosition;B.plugTouches=t.touches;i.call(k,"swipeEnd",B);if(!w){return}var A=new Date();if(!k._events.doubleTap||k._events.doubleTap.length==0){v()}else{if(A-r>200){n=setTimeout(v,190)}else{clearTimeout(n);m(B);i.call(k,"doubleTap",t)}}r=A}function o(A){t=A;A.plugStartPosition={pageX:l,pageY:u};i.call(k,"swipe",A);if(!w){return}j=A.touches[0].pageX;s=A.touches[0].pageY;if(Math.abs(l-j)>2||Math.abs(u-s)>2){var B=g(l,j,u,s);i.call(k,"swipe"+B,A)}else{v()}m(A)}z.addEventListener("touchstart",p);z.addEventListener("MSPointerDown",p);z.addEventListener("pointerdown",p);z.addEventListener("touchend",x);z.addEventListener("MSPointerUp",x);z.addEventListener("pointerup",x);z.addEventListener("touchmove",o);z.addEventListener("MSPointerMove",o);z.addEventListener("pointermove",o);z.addEventListener("touchcancel",m);z.addEventListener("MSPointerCancel",m);z.addEventListener("pointercancel",m)}function c(j,k){var k=k||{};this.dom=j;this._events={};h.call(this,this.dom)}c.prototype.on=function a(r,q,n){var j,o;if(typeof(q)=="string"){j=q.replace(/^\./,"");o=n}else{j=null;o=q}if(typeof(o)=="function"&&r&&r.length){var k=r.split(/\s+/);for(var l=0,p=k.length;l<p;l++){var m=k[l];if(!this._events[m]){this._events[m]=[]}this._events[m].push({className:j,fn:o})}}return this};return function(j){return new c(j)}});